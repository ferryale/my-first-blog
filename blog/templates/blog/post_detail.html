{% extends 'blog/base.html' %}

{% block content %}
	<div>	
		<br />
		<p>
			{% if post.published_date %}
			<a>Published: {{ post.published_date }} </a>	
			{% else %}
				{% if user.is_authenticated %}
				<a class="btn btn-default" href="{% url 'post_publish' pk=post.pk %}">Publish</a>
				{% endif %}
			{% endif %}
			{% if user.is_authenticated %}
			<a class="btn btn default" href="{% url 'post_edit' pk=post.pk %}">Edit</a>
			<a class="btn btn default" href="{% url 'post_remove' pk=post.pk %}">Remove</a>
			{% endif %}
		</p>
		<h4>Author: {{ post.author }} </h4>	
		<h2>{{ post.title }}</h2>
		<p>{{ post.text|linebreaks }}</p>
		<hr>
		<a class="btn btn-default" href="{% url 'add_comment_to_post' pk=post.pk %}">Add comment</a>
		{% for comment in post.comments.all %}
			{% if user.is_authenticated or comment.approved_comment %}
		    		<div class="comment">
		    			<br />
		    			<div class="date">
						<p>{{ comment.created_date }}</p>
						{% if not comment.approved_comment %}
                				<a class="btn btn-default" href="{% url 'comment_remove' pk=comment.pk %}">Remove</a>
                				<a class="btn btn-default" href="{% url 'comment_approve' pk=comment.pk %}">Approve</a>
            					{% endif %}
					</div>
					<strong>{{ comment.author }}</strong>
					<p>{{ comment.text|linebreaks }}</p>
		    		</div>
		    	{% endif %}
		    		
			{% empty %}
	    			<p>No comments yet.</p>
			{% endfor %}	
	</div>
{% endblock %}		
